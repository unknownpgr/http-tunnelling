const net=require("net"),stream=require("stream"),[applicationAddr,serverAddr]=process.argv.slice(2);function parseAddress(e){var[e,r]=e.split(":");return[e,r?parseInt(r):80]}const[serverIp,serverPort]=parseAddress(serverAddr),[applicationIp,applicationPort]=parseAddress(applicationAddr),client=net.createConnection(serverPort,serverIp,()=>{console.log(`Connected to ${serverIp}:`+serverPort);const t=new stream.PassThrough,e=net.createConnection(applicationPort,applicationIp,()=>{console.log(`Connected to ${applicationIp}:`+applicationPort),e.pipe(t),t.pipe(e),t.on("close",()=>{e.end()})});let n=!1;client.on("data",e=>{var r,e=e.toString();n||([e,r]=e.split("|"),console.log(e),t.write(r),client.pipe(t),t.pipe(client),client.on("close",()=>{t.end()}),n=!0)})});